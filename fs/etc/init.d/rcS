#!/bin/bash

# ██╗  ██╗██████╗  ██████╗ ███████╗
# ██║ ██╔╝██╔══██╗██╔═══██╗██╔════╝
# █████╔╝ ██║  ██║██║   ██║███████╗
# ██╔═██╗ ██║  ██║██║   ██║╚════██║
# ██║  ██╗██████╔╝╚██████╔╝███████║
# ╚═╝  ╚═╝╚═════╝  ╚═════╝ ╚══════╝
# ---------------------------------
#   KD's Homebrew Linux Distro
# ---------------------------------

# Mount all filesystems in fstab
mount -a

# Start udevd if it exists
if [ -x /usr/sbin/udevd ]; then
    echo "Starting udevd..."
    mkdir -pv /run/udev
    chmod 755 /run/udev
    if [ ! -d /run/udev ]; then
        echo "CRITICAL: Failed to create /run/udev"
    fi
    /usr/sbin/udevd --daemon
    /usr/sbin/udevadm trigger
    /usr/sbin/udevadm settle
fi

# Set hostname
hostname -F /etc/hostname

# Suppress kernel messages on console
dmesg -n 1

echo "KDOS Initialized."
sleep 1